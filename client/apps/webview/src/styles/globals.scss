@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  
  html {
    /* WebView에서 overscroll 방지 */
    overscroll-behavior: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  body {
    @apply bg-background text-text-primary;
    /* 시스템 폰트 우선 */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    
    /* 모바일 터치 UX 최적화 */
    touch-action: pan-y;
    user-select: none;
  }
  
  /* 터치 가능한 요소만 select 허용 */
  input,
  textarea {
    user-select: text;
  }
  
  /* Toss 스타일: 얇은 구분선 */
  hr {
    @apply border-border;
  }
}

@layer components {
  /* 공통 터치 영역 */
  .touch-area {
    @apply min-h-touch min-w-touch;
  }
  
  /* 스크롤바 숨기기 */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
    &::-webkit-scrollbar {
      display: none;  /* Chrome, Safari, Opera */
    }
  }
  
  /* 페이지 컨테이너 (PC에서는 중앙에 모바일 뷰처럼 표시) */
  .page-container {
    @apply max-w-screen-sm mx-auto min-h-screen;
    /* PC에서 그림자 효과 */
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.05);
  }
  
  /* Toss 스타일 구분선 */
  .divider {
    @apply h-px bg-border;
  }
  
  .divider-thick {
    @apply h-2 bg-surface;
  }
}

@layer utilities {
  /* 안전 영역 (노치 대응) */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* 스크롤 스냅 */
  .snap-x {
    scroll-snap-type: x mandatory;
  }
  
  .snap-item {
    scroll-snap-align: start;
  }
  
  /* 스크롤바 숨기기 */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;

    &::-webkit-scrollbar {
      display: none;
    }
  }

  /* 커뮤니티 태그 색상 매핑 */
  $tag-colors: (
    'all': #4ccf89,
    'togather': #fd6174,
    'share': #7ba8f0,
    'lifestyle': #ff8e60,
    'chat': #4ccf89,
    //'chat': #ffd858,
    'market': #a88af8
  );

  /* 커뮤니티 태그 아이콘 색상 - 포인트 컬러 */
  @each $tag, $color in $tag-colors {
    .tag-#{$tag} {
      color: $color;
    }
  }

  /* 커뮤니티 태그 배경 - 진한 회색 통일 */
  @each $tag, $color in $tag-colors {
    .tag-bg-#{$tag} {
      background-color: #d1d1d1;
    }
  }

  /* react-day-picker 드롭다운 스타일 */
  :global(.rdp-dropdown),
  :global(.rdp-dropdown_month),
  :global(.rdp-dropdown_year) {
    @apply h-7 px-2 pr-8 text-sm border border-border rounded-md bg-background text-text-primary appearance-none cursor-pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23999' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.5rem center;
  }

  /* 드롭다운 중복 표시 숨기기 - select 다음에 오는 span 숨김 */
  :global(.rdp-dropdown_root > span:not(:first-child)) {
    display: none !important;
  }

  :global(.rdp-dropdown_icon) {
    display: none !important;
  }

  /* 선택된 날짜 초록색 강제 적용 */
  :global(.rdp-day_selected),
  :global(.rdp-day_selected:hover),
  :global(.rdp-day_selected:focus),
  :global(.rdp-day_selected.rdp-day_button) {
    background-color: #4ccf89 !important;
    color: white !important;
  }

  /* 오늘 날짜 초록색 강제 적용 */
  :global(.rdp-day_today),
  :global(.rdp-day_today.rdp-day_button) {
    background-color: rgba(76, 207, 137, 0.1) !important;
    color: #4ccf89 !important;
    font-weight: 600 !important;
    border: 1px solid #4ccf89 !important;
  }

  /* Sonner error 타입 확인 버튼 스타일 */
  .error-toast [data-button],
  .error-toast button[data-button],
  .error-toast [data-sonner-button],
  .error-toast button[data-sonner-button],
  .error-toast [data-sonner-action],
  .error-toast button[data-sonner-action] {
    background-color: #fd6174 !important;
    color: white !important;
  }

  /* Sonner error 타입 아이콘 색상 */
  .error-toast svg,
  .error-toast [data-icon] {
    color: #fd6174 !important;
  }
}
